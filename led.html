<!doctype html>
<html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>LED controller</title>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

        <script src="https://code.jquery.com/jquery-2.2.3.min.js" integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo=" crossorigin="anonymous"></script>

        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/7.0.2/css/bootstrap-slider.min.css">

        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/7.0.2/bootstrap-slider.min.js"></script>

        <script type="text/javascript">
        window.onload = function () {
            // Init slider
            var slider = new Slider('#ex1', {
                formatter: function(value) {
                    return 'Brightness: ' + value;
                }
            });

            // On slide, send websocket
            slider.on("slide", function(slideEvt) {
                var obj = {0: slideEvt}
                tosend = JSON.stringify(obj);
                console.log(tosend)
                ws.send(tosend);
            });
        };

        // Websockets
        var ws = null;
        function init(colors) {
            if ("WebSocket" in window) {
                ws = new WebSocket("ws://" + location.hostname + ":8000/ws");
                ws.onopen = function() {
                    console.log("Connection is opened");
                }
                ws.onclose = function() {
                    console.log("Connection is closed");
                }
                ws.onmessage = function(msg, colors) {
                    //document.getElementById("display").innerHTML = msg.data;

                    // Converting received color information into hex
                    //colors = JSON.parse(msg.data)
                    //hex = rgbToHex(colors[0]/16, colors[1]/16, colors[2]/16)
                    //console.log(hex)
                    //document.body.style.backgroundColor = hex;
                }    
            } else {
                console.log('Your browser doenst support WebSocket!')
            }
        }
        </script>   

    </head>
    <body onload="init();">

    <div style="margin-top: 350px">

    <input id="ex1" data-slider-id='ex1Slider' type="text" data-slider-min="0" data-slider-max="4096" data-slider-step="1" data-slider-value="80"/>

    </div>

    </body>
</html>